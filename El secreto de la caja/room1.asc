// room script file


function room_Load()
{
  if(hasBeenOutsideHome){
      oSunnyWindow.Visible = true;
  }
  bedroomMusic.Play();
}

function room_AfterFadeIn()
{
  if(player.PreviousRoom == 5){
  Verbs.MovePlayer(825, 790);
  }
}

function hBedroomExit_Mode8()
{
  bedroomMusic.Stop();
  player.EnterRoom(5, 1075, 209, eDirectionDown);
}

function oCigarretes_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Asesino!");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
    Verbs.AnyClickWalkLookPick(1780, 630, eDirectionRight, "Ven aqui, asesino!", oCigarretes.ID , iCigarretes); 
 }
 else Verbs.Unhandled();
}

function oWallet_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Mi cartera");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
    Verbs.AnyClickWalkLookPick(1620, 780, eDirectionDown, "A la saca", oWallet.ID , iWallet); 
 }
 else Verbs.Unhandled();
}

function oLever_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
    Verbs.AnyClickWalkLookPick(1169, 369, eDirectionRight, "A la saca", oLever.ID , iLever); 
 }
 else Verbs.Unhandled();
}

function oMirror_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_Push)) {
    Verbs.MovePlayer( 1169, 369);
    Wait(10);
    oMirror.X = oMirror.X + 70;
 }
 else if(Verbs.UsedAction(eGA_Pull)) {
    Verbs.MovePlayer(1200, 369);
    Wait(10);
    oMirror.X = oMirror.X - 70;
 }
 else Verbs.Unhandled();
}

function oClosetOpened_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_Close)) {
    Verbs.MovePlayer( 1500, 495);
    Wait(10);
    oClosetOpened.Visible = false;
 }
 else Verbs.Unhandled();
}

function hBedroomCloset_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("El armario de la ropa");
 }
 else if(Verbs.UsedAction(eGA_Open)) {
   dElena.SetOptionState(4, eOptionOn);
   Verbs.MovePlayer( 1500, 495);
   if(hasBedroomClosetBeenOpenedWithKey){
      Wait(10);
      oClosetOpened.Visible = true;
    if(!player.HasInventory(iCoat)){
      oCoat.Visible = true;
     }
   }
   else{
      player.Say("Esta cerrado con llave");
   }

 }
 else Verbs.Unhandled();
}

function oCoat_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
   Verbs.AnyClickWalkLookPick(1500, 495, eDirectionRight, "A la saca", oCoat.ID , iCoat); 
    oCoat.Visible = false;
 }
 else Verbs.Unhandled();
}



function hBedroomLock_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_Open)) {
   dElena.SetOptionState(4, eOptionOn);
   Verbs.MovePlayer( 1500, 495);
   if(hasBedroomClosetBeenOpenedWithKey){
      Wait(10);
      oClosetOpened.Visible = true;
      if(!player.HasInventory(iCoat)){
        oCoat.Visible = true;
       }
   }
   else{
      player.Say("Necesito la llave");
   }
 }
 else if(Verbs.UsedAction(eGA_UseInv) && player.ActiveInventory == iClosetKey){
    Verbs.MovePlayer( 1500, 495);
    Wait(10);
    hasBedroomClosetBeenOpenedWithKey = true;
    player.Say("La cerradura ahora esta abierta");
 }
 else Verbs.Unhandled();
}

function hBedroomWallPlug_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_UseInv) && player.ActiveInventory == iCharger){
    Verbs.MovePlayer( 510,690);
    Wait(10);
    oCharger.Visible = true;
 }
 else Verbs.Unhandled();
}

function oCharger_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("TODO");
 }
 else if(Verbs.UsedAction(eGA_UseInv) && player.ActiveInventory == iMobile){
    Verbs.MovePlayer( 510,690);
    Wait(10);
    oBedroomMobile.Visible = true;
    isMobileCharging = true;
    player.Say("Eso es, venga esos vatios ahi, que no paren");
 }
 else Verbs.Unhandled();
}

function oBedroomMobile_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
    if(isMobileCharged){
      player.Say("Esta cargado!");
    }
    else{
      player.Say("Esta cargando");
    }
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
   if(isMobileCharged){
     Verbs.AnyClickWalkLookPick(1500, 495, eDirectionRight, "A la saca", oCoat.ID , iCoat); 
   }
   else{
     player.Say("Todavia se esta cargando");
   }
 }
 else Verbs.Unhandled();
}
