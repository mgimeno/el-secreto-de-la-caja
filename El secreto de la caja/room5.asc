// room script file

function room_Load()
{
  livingRoomMusic.Play();
  
  if(hasNeedToSwapWaterGlassWithEmptyGlass){
      hasNeedToSwapWaterGlassWithEmptyGlass = false;
      oLivingRoomWaterGlass.Visible = false;
      oLivingRoomEmptyGlass.Visible = true;
  }
}

function room_AfterFadeIn()
{
  if(player.PreviousRoom == 1 && hasBeenInLivingRoom){
    Verbs.MovePlayer(1070, 445);
  }
  else if(player.PreviousRoom == 2){
    Verbs.MovePlayer(1150, 508);
    player.FaceObject(oLivingRoomDoorOpened);
    oLivingRoomDoorOpened.Visible = false;
  }
  hasBeenInLivingRoom = true;
  
}

function room_FirstLoad()
{
    Verbs.MovePlayer(1165, 700);
    cElena.Say("Ya era hora que te levantases");
    player.Say("Me he quedado traspuesto");
    cElena.Say("Mira a ver tu movil");
    cElena.Say("Lleva un buen rato sonando");
    player.Say("Vale");
}

function repeatedly_execute() 
{
  if(hasNeedToImmediatelyShowLivingRoomWaterGlass){
      hasNeedToImmediatelyShowLivingRoomWaterGlass = false;
      oLivingRoomWaterGlass.Visible = true;
  }
}

function hLivingRoomBedroomExit_Mode8()
{
  livingRoomMusic.Stop();
  player.EnterRoom(1, 155, 840, eDirectionRight);
}

function oLivingRoomDoorOpened_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("La puerta a lo desconocido");
 }
 else if(Verbs.UsedAction(eGA_Close)) {
   Verbs.MovePlayer(1150, 508);
    oLivingRoomDoorOpened.Visible = false;
 }
 else if(Verbs.UsedAction(eGA_WalkTo)){
   Verbs.MovePlayer(1225, 463);
    livingRoomMusic.Stop();
  player.EnterRoom(2, 680, 1027, eDirectionDown);
 }
 else Verbs.Unhandled();
}

function hLivingRoomDoorClosed_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("La puerta a lo desconocido");
 }
 else if(Verbs.UsedAction(eGA_Open)) {
   Verbs.MovePlayer(1150, 508);
   if(hasNeedToGoOutFromHome){
     if(player.HasInventory(iCoat)){
       oLivingRoomDoorOpened.Visible = true;
       if(!hasBeenOutsideHome){
          player.Say("La verdad esta ahi fuera");
       }
     }
     else{
        player.Say("Necesito ir al badulaque pero con la que esta cayendo, no voy a salir sin abrigo");
     }
   }
   else{
      player.Say("No tengo ninguna necesidad de salir de casa");
      player.Say("A parte hace mucho frio");
   }
   
 }
 else Verbs.Unhandled();
}

function oLivingRoomMobile_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Mi movil");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
    Verbs.AnyClickWalkLookPick(260, 760, eDirectionDown, "Tengo varios mensajes", oLivingRoomMobile.ID , iMobile);
    Wait(10);
    player.Say("Escrotor");
    player.Say("Quedamos para salir con la bici el Sabado?");
    player.Say("A tope");
    player.Say("La jimena");
    player.Say("Jugamos al padel el Domingo?");
    player.Say("Mu rico");
    cElena.Say("Tira tira...");
    player.Say("Mensaje de numero desconocido");
    player.Say("Se quien tiene lo que buscas");
    player.Say("Se quien tiene el Big Whoop");
    cElena.Say("Por fin vamos a acabar esta maldita gincana!");
    player.Say("Lo tiene...");
    Wait(40);
    player.Say("Mierda!");
    cElena.Say("Que pasa?");
    player.Say("Me he quedado sin bateria");
    player.Say("Y no me ha dado tiempo a leerlo");
    cElena.Say("Cojonudo, pues carga el movil");
    player.Say("Voy!");
    dElena.SetOptionState(2, eOptionOn);
 }
 else Verbs.Unhandled();
}

function oRemoteControl_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("El poder!");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
    Verbs.AnyClickWalkLookPick(665, 620, eDirectionDown, "Tengo el poder!", oRemoteControl.ID , iRemoteControl); 
 }
 else Verbs.Unhandled();
}

function oLivingRoomClock_AnyClick()
{
  if(Verbs.UsedAction(eGA_LookAt)) {
    if(hasNeedToFixClock){
      player.Say("Las manecillas no se mueven");
    }
    else{
      player.Say("Un reloj");
    }
 }
 else if(hasNeedToFixClock && Verbs.UsedAction(eGA_PickUp)) {
   Verbs.AnyClickWalkLookPick(665, 620, eDirectionDown, "Menos mal que estos pantacas tienen los bolsillos anchos", oLivingRoomClock.ID , iClock); 
 }
 else Verbs.Unhandled();
}

function oLivingRoomWaterGlass_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Medio lleno o medio vacio?");
 }
 else Verbs.Unhandled();
}

function oLivingRoomEmptyGlass_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Hay que beber mucha agua al dia, claro que si");
 }
 else if(canPickupEmptyGlass && Verbs.UsedAction(eGA_PickUp)) {
   Verbs.AnyClickWalkLookPick(665, 620, eDirectionDown, "Me lo llevo", oLivingRoomEmptyGlass.ID , iEmptyGlass); 
 }
 else Verbs.Unhandled();
}

function oLivingRoomTvMatch_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Partidazo");
    player.Say("Me quedaria a verlo pero tengo cosas que hacer");
 }
 else if(Verbs.UsedAction(eGA_PickUp)) {
 }
 else Verbs.Unhandled();
}

function hLivingRoomTvOff_AnyClick()
{
if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Bendito aparato");
 }
 else if(Verbs.UsedAction(eGA_UseInv) && player.ActiveInventory == iRemoteControl){
    Verbs.MovePlayer(685, 585);
    oLivingRoomTvMatch.Visible = true;
    Wait(30);
    cElena.Say("Otra vez futbol...");
    cElena.Say("Colombia Ghana?");
    Wait(5);
    cJuan.Say("No, van empate");
    Wait(20);
    cElena.Say("Madre mia...");
 }
 else Verbs.Unhandled();
}

function hClockNail_AnyClick()
{

if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Ahi se sujeta el reloj");
 }
 else if(Verbs.UsedAction(eGA_UseInv) && player.ActiveInventory == iClock){
    Verbs.MovePlayer(685, 585);
    player.LoseInventory(iClock);
    oLivingRoomClock.Visible = true;
    if(hasPutBatteriesOnClock){
        player.Say("Arreglao");
        player.Say("Menudo genio soy");
        dElena.SetOptionState(4, eOptionOffForever);
        dElena.SetOptionState(5, eOptionOn);
        
    }
 }
 else Verbs.Unhandled();
}

function hLivingRoomPlatonPicture_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("La escuela de Atenas");
  player.Say("Eso si que era una escuela y no el Joaquin Costa");
 }
 else Verbs.Unhandled();
}

function hComputer_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("El ordenador");
  player.Say("Es util pero cuando da problemas lo escacharias contra la pared");
 }
 else if(Verbs.UsedAction(eGA_Use)){
    player.Say("Ostia!");
    player.Say("Me veo a mi mismo jugando a juego donde aparezco jugando a un juego");
    player.Say("donde aparezco jugando a un juego donde aparezco jugando a juego...");
    player.Say("aaaahhh!");
    player.Say("Que movida");
 }
 else Verbs.Unhandled();
}

function hLivingRoomLamp_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Veo lucecicas!");
 }
 else Verbs.Unhandled();
}

function hPuzzleBox_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
   player.Say("Con esta maldita caja empezo todo");
  player.Say("Ahora que si no fuera por Elena, aun estaria ahi sin resolver");
  player.Say("No tengo paciencia yo pa estas cosas");
  cElena.Say("Cuando tienes razon, tienes razon");
 }
 else if(Verbs.UsedAction(eGA_Use)){
    player.Say("No tengo paciencia yo pa estas cosas");
    cElena.Say("Cierto como la vida misma");
 }
 else Verbs.Unhandled();
}

function hDocuments_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("He aqui todos los calculos para la proxima jornada en el Hattrick");
  player.Say("Con mi proyecto a largo plazo seguro que subo a segunda");
  player.Say("Arriba el Olivas Negras FC!");
 }
 else Verbs.Unhandled();
}

function hSofa_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("La mejor inversion de la casa");
 }
 else Verbs.Unhandled();
}

function hUmbrellaStand_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Soy de la opinion que los ingleses no tienen imaginacion para crear palabras");
  player.Say("Luego pienso que nosotros tenemos palabras como paraguas y me tranquilizo");
 }
 else Verbs.Unhandled();
}

function hFruitBowl_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Dicen que hay que comer frutas y verduras 5 veces al dia");
  player.Say("La gente dice unas chorradas...");
  player.Say("A mi dame un buen entrecot sangriento y vete a zurrirte la banana por ahi");
 }
 else Verbs.Unhandled();
}

function hCandle_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Si es que soy un romantico");
 }
 else Verbs.Unhandled();
}

function hWorldMap_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("El mundo es vasto y variado");
  player.Say("Pero en casa se esta muy ricamente");
 }
 else Verbs.Unhandled();
}

function hLivingRoomSwitch_AnyClick()
{
 if(Verbs.UsedAction(eGA_LookAt)) {
  player.Say("Interruptor!");
 }
 else if(Verbs.UsedAction(eGA_Use)){
    player.Say("No quiero arriesgarme a apagar la luz con Kuklinski aqui");
 }
 else Verbs.Unhandled();
}
